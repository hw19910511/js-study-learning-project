<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<title>JavaScript教程10-定时器(无缝滚动)</title>
    <style type="text/css">	  /*#div1{width:200px;height:200px;background:red;position:absolute;top:50px;left:0px;}*/
	*{margin:0;padding:0;}
	#div2{width:920px;height:300px;margin:0 auto;position:relative;background:red;overflow:hidden;}
	#div2 ul{position:absolute;left:0px;top:0px;}
	#div2 ul li img{width:220px;}
	#div2 ul li{float:left;width:230px;height:300px;list-style:none;}
	
	</style>
	<script type="text/javascript">
	//offsetLeft:相对于父对象的左边距
	  /*setInterval(function(){ //让div从左向右移动
         var oDiv=document.getElementById('div1');
		 oDiv.style.left=oDiv.offsetLeft+10+'px';
	  },30);*/
	 window.onload=function()
     {
	    var oDiv=document.getElementById('div2');
		var oUl=oDiv.getElementsByTagName('ul')[0];
		var aLi=oUl.getElementsByTagName('li');
		var speed=2;
		
		//oUl.innerHTML=oUl.innerHTML+oUl.innerHTML;//两个ul相加
		oUl.innerHTML+=oUl.innerHTML
		oUl.style.width=aLi[0].offsetWidth*aLi.length+'px';//总长度
		
		function move(){//从右往左
		  if(oUl.offsetLeft<-oUl.offsetWidth/2)
		  {
               oUl.style.left='0';//停止返回，重头开始
		  }
		  
		  if(oUl.offsetLeft>0){//从左往右
		     oUl.style.left=-oUl.offsetWidth/2+'px';
		  }
		  //oUl.style.left=oUl.offsetLeft+2+'px';
		    oUl.style.left=oUl.offsetLeft+speed+'px';
		};
		var timer= setInterval(/*function(){//从右往左
		  if(oUl.offsetLeft<-oUl.offsetWidth/2)
		  {
               oUl.style.left='0';//停止返回，重头开始
		  }
		  
		  if(oUl.offsetLeft>0){//从左往右
		     oUl.style.left=-oUl.offsetWidth/2+'px';
		  }
		  oUl.style.left=oUl.offsetLeft+2+'px';
		}*/
		move,30);
	 
	     oDiv.onmouseover=function(){
		   clearInterval(timer);
		 }
		 
		 oDiv.onmouseout=function(){
		  timer=setInterval(move,30);
		 }
	 
	 
	 //按钮控制滚动图
	 document.getElementsByTagName('a')[0].onclick=function()
	 {
	    speed=-2;
	 };
	 document.getElementsByTagName('a')[1].onclick=function()
	 {
	    speed=2;
	 };
  };	 
	</script>
</head>
<body>
	<!--<div id="div1"></div>-->
	<a href="javascript:;">向左走</a>
    <a href="javascript:;">向右走</a>
	<div id="div2">
	  <ul>
		<li><img src="images/1.jpg" alt="无缝滚动" /></li>
		<li><img src="images/2.jpg" alt="无缝滚动" /></li>
		<li><img src="images/3.jpg" alt="无缝滚动" /></li>
		<li><img src="images/4.jpg" alt="无缝滚动" /></li>
	  </ul>
   </div>
</body>
</html>